is.data.frame(b)
b
b<-as.data.frame(b)
b
View(b)
b <- lapply(
get_noon(
seq(
today(),
today() + weeks(1),
by='days'
)[1:7],
o$timezone
),
get_sea_predictions
)
names(b)
data.frame(b)
colnames(data.frame(b))
ncol(data.frame(b))
as.data.frame.list
b
bind_rows(lapply(b, as.data.frame.list))
dfd <- bind_rows(lapply(b, as.data.frame.list))
View(dfd)
dfd$time <- as_datetime(dfd$time)
dfd$time <- as_date(dfd$time)
dfd <- bind_rows(
lapply(
lapply(
get_week_noons_starting_at(today()),
get_sea_predictions
),
as.data.frame.list
)
)
get_week_noons_starting_at() <- function(day){
get_noon(
seq(
day,
day + weeks(1),
by='days'
)[1:7],
o$timezone
)
}
get_week_noons_starting_at <- function(day){
get_noon(
seq(
day,
day + weeks(1),
by='days'
)[1:7],
o$timezone
)
}
dfd <- bind_rows(
lapply(
lapply(
get_week_noons_starting_at(today()),
get_sea_predictions
),
as.data.frame.list
)
)
dfd <- bind_rows(
lapply(
lapply(
get_week_noons_starting_at(today()),
get_sea_predictions
),
as.data.frame.list
)
)
dfd$time <- as_date(dfd$time)
View(dfd)
dfd <- bind_rows(
lapply(
lapply(
get_week_noons_starting_at(today()),
get_sea_predictions
),
as.data.frame.list
)
)
dfd$time <- as.Date(dfd$time)
View(dfd)
dfd$time <- as.Date(dfd$time, origin = "1970-01-01 00:00:00")
View(dfd)
dfd <- bind_rows(
lapply(
lapply(
get_week_noons_starting_at(today()),
get_sea_predictions
),
as.data.frame.list
)
)
as.POSIXct(1527750000)
as.POSIXct(1527750000, origin = "1970-01-01")
as.Date(as.POSIXct(1527750000, origin = "1970-01-01"))
dfd <- bind_rows(
lapply(
lapply(
get_week_noons_starting_at(today()),
get_sea_predictions
),
as.data.frame.list
)
)
dfd$time <- as.Date(as.POSIXct(dfd$time, origin = "1970-01-01"))
View(dfd)
dfd <- bind_rows(
lapply(
lapply(
get_week_noons_starting_at(today() + months(5)),
get_sea_predictions
),
as.data.frame.list
)
)
dfd$time <- as.Date(as.POSIXct(dfd$time, origin = "1970-01-01"))
View(dfd)
is.Date(today())
years(1)
as.Date("2018-01-01")
is.Date(mdy(112018))
mdy(112018)
mdy(1118)
mdy(010118)
mdy("010118")
mdy("01012018")
mdy("01012018")
year(Sys.time())
get_week_noons_starting_at(mdy(paste0("0101", Sys,time())))
get_week_noons_starting_at(mdy(paste0("0101", Sys.time())))
(mdy(paste0("0101", Sys.time())))
mdy(paste0("0101", year(Sys.time())))
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time()))))
get_week_noons_starting_at <- function(day){
full_year <- seq(
day,
day + years(1),
by='days'
)
full_year <- full_year[-length(full_year)]
get_noon(
full_year,
o$timezone
)
}
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time()))))
get_noon <- function(day, timezone){
hour(day) <- 12
second(day) <- minute(day) <- 0
tz(day) <- timezone
return(as.POSIXct(day))
}
dfd <- bind_rows(
lapply(
lapply(
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time())))),
get_sea_predictions
),
as.data.frame.list
)
)
tic()
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time()))))
toc()
mdy(paste0("0101", year(Sys.time())))
tic()
get_sea_predictions(mdy(paste0("0101", year(Sys.time()))))
toc()
0.28*1000
get_sea_predictions <- function(input){
delay(280)
return(list())
}
tic()
lapply(
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time())))),
get_sea_predictions
)
toc()
get_sea_predictions <- function(input){
pause(0.28)
return(list())
}
tic()
lapply(
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time())))),
get_sea_predictions
)
toc()
get_sea_predictions <- function(input){
Sys.sleep(0.28)
return(list())
}
tic()
lapply(
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time())))),
get_sea_predictions
)
get_week_noons_starting_at <- function(day){
full_year <- seq(
day,
day + weeks(1),
by='days'
)
full_year <- full_year[-length(full_year)]
get_noon(
full_year,
o$timezone
)
}
lapply(
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time())))),
get_sea_predictions
)
tic()
lapply(
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time())))),
get_sea_predictions
)
toc()
get_sea_predictions <- function(input){
Sys.sleep(0.28)
return(list())
}
tic()
dfd <- bind_rows(
lapply(
lapply(
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time())))),
get_sea_predictions
),
as.data.frame.list
)
)
toc()
?system.time
system.time(print(t))
system.time(print("t"))
install.packages("microbenchmarks")
$microbenchmarks
?microbenchmarks
??microbenchmarks
library("microbenchmarks")
install.packages("microbenchmarks")
install.packages("rbenchmark")
?rbenchmark
library("rbenchmark")
?rbenchmark
benchmark(Sys.sleep(0.01))
benchmark(Sys.sleep(0.01), replications = 1)
get_sea_predictions <- function(input){
Sys.sleep(0.28)
return(list())
}
tic()
get_sea_predictions(mdy(paste0("0101", year(Sys.time()))))
toc()
get_week_noons_starting_at <- function(day){
full_year <- seq(
day,
day + weeks(1),
by='days'
)
full_year <- full_year[-length(full_year)]
get_noon(
full_year,
o$timezone
)
}
benchmark(
bind_rows(
lapply(
lapply(
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time())))),
get_sea_predictions
),
as.data.frame.list
)
),
replications = 1
)$elapsed
get_week_noons_starting_at <- function(day){
full_year <- seq(
day,
day + weeks(3),
by='days'
)
full_year <- full_year[-length(full_year)]
get_noon(
full_year,
o$timezone
)
}
benchmark(
bind_rows(
lapply(
lapply(
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time())))),
get_sea_predictions
),
as.data.frame.list
)
),
replications = 1
)$elapsed
benchmark(
{
dfd <- bind_rows(
lapply(
lapply(
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time())))),
get_sea_predictions
),
as.data.frame.list
)
)
dfd$time <- as.Date(as.POSIXct(dfd$time, origin = "1970-01-01"))
View(dfd)
},
replications = 1
)$elapsed
View(dfd)
benchmark(
dfd <- bind_rows(
lapply(
lapply(
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time())))),
get_sea_predictions
),
as.data.frame.list
)
),
replications = 1
)$elapsed
View(dfd)
get_noon <- function(day, timezone){
hour(day) <- 12
second(day) <- minute(day) <- 0
tz(day) <- timezone
return(as.POSIXct(day))
}
get_week_noons_starting_at <- function(day){
full_year <- seq(
day,
day + years(1),
by='days'
)
full_year <- full_year[-length(full_year)]
get_noon(
full_year,
o$timezone
)
}
dfd <- bind_rows(
lapply(
lapply(
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time())))),
get_sea_predictions
),
as.data.frame.list
)
)
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time()))))
dfd
tic()
dfd <- bind_rows(
lapply(
lapply(
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time())))),
get_sea_prediction
),
as.data.frame.list
)
)
View(dfd)
toc()
get_sea_prediction <- function(timedate){
sea_lat <- 47.6062
sea_long <- -122.3321
timedate <- paste(round(as.numeric(as.POSIXct(timedate))))
d <- get_request(paste0(
"https://api.darksky.net/forecast/", sea_key, "/",
sea_lat,
",",
sea_long,
",",
timedate,
"?exclude=currently,minutely,hourly"
))$daily$data
return(c(
"time" = round(d$time),
"max_temp" = d$temperatureHigh,
"min_temp" = d$temperatureLow,
"pct_precip" = d$precipProbability,
"inch_precip" = 24 * d$precipIntensity
))
}
tic()
dfd <- bind_rows(
lapply(
lapply(
get_week_noons_starting_at(mdy(paste0("0101", year(Sys.time())))),
get_sea_prediction
),
as.data.frame.list
)
)
View(dfd)
toc()
dfd$time <- as.Date(as.POSIXct(dfd$time, origin = "1970-01-01"))
dfd$cd <- dfd$time
year(dfd$cd) <- 2000
dfd$time <- as.Date(as.POSIXct(dfd$time, origin = "1970-01-01"))
dfd$year <- year(dfd$time)
dfd$month <- month(dfd$time)
dfd$day <- day(dfd$time)
View(dfd$time)
View(dfd)
write.csv(dfd, file = "api_data_2018.csv")
api_2018 <- read.csv(
"data/api_data_2018.csv",
stringsAsFactors = FALSE
)
colnames(api_2018)
api_2018$X
View(api_2018)
api_date_range <- range(api_2018$time)
api_date_range
api_date_range[2]
api_date_range[2]-days(7)
as.Date(api_date_range[2])-days(7)
as.Date(today())
as.Date(today() + weeks(1))
runApp()
# Source supplemental files below:
source("seattle_rain_analysis.R")
api_2018
runApp()
api_2018$time
system.time(api_2018$time)
system.time(sort(api_2018$time))
g <- api_2018$time[1:50]
g
g <- api_2018$time[1:15]
g
format(g, format = "%b %d")
format(as.Date(g), format = "%b %d")
runApp()
runApp()
cdrng <- c(today(), today() + days(7))
cdrng
year(cdrng) <- 2000
cdrng
runApp()
runApp()
paste(format(as.Date(cd), format = "%b %d"))
df <- data.frame(
"month_day" = api_table$month_day,
"cd" = api_table$cd
)
df <- data.frame(
"month_day" = api_2018$month_day,
"cd" = api_2018$cd
)
asdf <- seattle_rain_df$cd[c(1, 3, 5)]
asdf
seattle_rain_df %>% rowwise() %>% filter(cd %in% asdf)
seattle_rain_df %>% rowwise() %>% filter(cd %in% asdf)$Max_Temp
(seattle_rain_df %>% rowwise() %>% filter(cd %in% asdf))$Max_Temp
runApp()
df <- data.frame(
"month_day" = api_2018$month_day,
"cd" = api_2018$cd
)
df <- data.frame(
api_2018$month_day,
api_2018$cd
)
runApp()
seattle_rain_df$Max_Temp[seattle_rain_df$cd %in% c(as.Date("2000-01-01"), as.Date("2000-01-03"))]
seattle_rain_df$Max_Temp[seattle_rain_df$cd %in% c(as.Date("2000-01-01"))]
unique(year(seattle_rain_df$Date))
length(unique(year(seattle_rain_df$Date)))
length(seattle_rain_df$Max_Temp[seattle_rain_df$cd %in% c(as.Date("2000-01-01"))])
seattle_rain_df$Max_Temp[seattle_rain_df$cd %in% c(as.Date("2000-01-03"))]
runApp()
corr <- unique(seattle_rain_df$cd)
length(corr)
corr %in% as.Date(c("2000-05-31", "2000-06-01"))
runApp()
runApp()
runApp()
runApp()
c(1,0) - c(100,100)
c(1,0)/2
runApp()
df <- unique(seattle_rain_df$cd)
df
runApp()
runApp()
is.infinite(-10/0)
is.infinite(10/0)
is.infinite(c(1,10/0))
runApp()
install.packages("shinythemes")
runApp()
